events
	GET GET
	POST POST
	PUT PUT
	DELETE DELETE
end

commands
#foreach ( $command in $commands.getRIMCommands() )
	$command
#end
#foreach ( $rsm in $rim.getResourceStateMachines() )
#foreach ( $transition in $rsm.getTransitions() )
#if (!$transition.isUniqueTransition() && !$transition.isCollectionState()) 
	GETNavProperty${transition.getTargetStateName()} entity=${rsm.getEntityName()}, navproperty=nav${transition.getTargetStateName()}
#end
#end
#end
end

initial resource ServiceDocument
	item ServiceDocument
	view { GETServiceDocument }
	path "/"
#foreach ( $rsm in $rim.getResourceStateMachines() )
	GET -> ${rsm.getCollectionStateName()}
#end
end

#foreach ( $rsm in $rim.getResourceStateMachines() )
#* Collection resource state*#
resource ${rsm.getCollectionStateName()}
	collection ${rsm.getEntityName()}
	view { GETEntities }
	path "/${rsm.getCollectionStateName()}()"
#foreach ( $transition in $rsm.getTransitions() )
#if ($transition.isPseudoState() && $transition.isBoundToCollection()) 
	${transition.getMethod()} -> ${rsm.getEntityStateName()}_${transition.getTargetStateName()}
#end
#end
#foreach ( $transition in $rsm.getTransitions() )
#if ($transition.isPseudoState() && !$transition.isBoundToCollection()) 
	${transition.getMethod()} *-> ${rsm.getEntityStateName()}_${transition.getTargetStateName()} id=${rsm.getMappedEntityProperty()}
#end
#end
	GET *-> ${rsm.getEntityStateName()} id=${rsm.getMappedEntityProperty()}
#foreach ( $transition in $rsm.getTransitions() )
#if (!$transition.isPseudoState())
#if ($transition.isCollectionState()) 
	GET ${transition.getTitleAssignment()}*-> ${transition.getTargetResourceStateMachine().getCollectionStateName()}Filtered filter="${transition.getFilter()}"
#elseif(!$transition.isUniqueTransition())
	GET *-> ${rsm.getEntityStateName()}_${transition.getTargetStateName()} id=${rsm.getMappedEntityProperty()}, nav${transition.getTargetStateName()}="${transition.getTargetStateName()}"
#else
	GET *-> ${transition.getTargetResourceStateMachine().getEntityStateName()} id=${transition.getLinkProperty()}
#end
#end
#end
end
#* Filtered collection resource state*#
#if(${rsm.isCollectionStateWithIncomingTransitions()})
resource ${rsm.getCollectionStateName()}Filtered
	collection ${rsm.getEntityName()}
	view { GETEntitiesFiltered }
	path "/${rsm.getCollectionStateName()}Filtered({filter})"
#foreach ( $transition in $rsm.getTransitions() )
#if ($transition.isPseudoState() && !$transition.isBoundToCollection()) 
	${transition.getMethod()} *-> ${rsm.getEntityStateName()}_${transition.getTargetStateName()} id=${rsm.getMappedEntityProperty()}
#end
#end
	GET *-> ${rsm.getEntityStateName()} id=${rsm.getMappedEntityProperty()}
#foreach ( $transition in $rsm.getTransitions() )
#if (!$transition.isPseudoState())
#if ($transition.isCollectionState()) 
	GET ${transition.getTitleAssignment()}*-> ${transition.getTargetResourceStateMachine().getCollectionStateName()}Filtered filter="${transition.getFilter()}"
#elseif(!$transition.isUniqueTransition())
	GET *-> ${rsm.getEntityStateName()}_${transition.getTargetStateName()} id=${rsm.getMappedEntityProperty()}, nav${transition.getTargetStateName()}="${transition.getTargetStateName()}"
#else
	GET *-> ${transition.getTargetResourceStateMachine().getEntityStateName()} id=${transition.getLinkProperty()}
#end
#end
#end
end
#end

#* Entity resource state*#
resource ${rsm.getEntityStateName()}
	item ${rsm.getEntityName()}
	view { GETEntity }
	path "/${rsm.getCollectionStateName()}(${rsm.getPathParametersTemplate()})"
#foreach ( $transition in $rsm.getTransitions() )
#if ($transition.isPseudoState() && !$transition.isBoundToCollection()) 
	${transition.getMethod()} -> ${rsm.getEntityStateName()}_${transition.getTargetStateName()} id=${rsm.getMappedEntityProperty()}
#end
#end
#foreach ( $transition in $rsm.getTransitions() )
#if (!$transition.isPseudoState())
#if ($transition.isCollectionState()) 
	GET ${transition.getTitleAssignment()}-> ${transition.getTargetResourceStateMachine().getCollectionStateName()}Filtered filter="${transition.getFilter()}"
#elseif(!$transition.isUniqueTransition())
	GET -> ${rsm.getEntityStateName()}_${transition.getTargetStateName()} id=${rsm.getMappedEntityProperty()}, nav${transition.getTargetStateName()}="${transition.getTargetStateName()}"
#else
	GET -> ${transition.getTargetResourceStateMachine().getEntityStateName()} id=${transition.getLinkProperty()}
#end
#end
#end
end

#* Transition to other resource states *#
#foreach ( $transition in $rsm.getTransitions() )
#if((!$transition.isUniqueTransition() && !$transition.isCollectionState()) || $transition.isPseudoState())#*
	Transition to entity resource state in target RSM *#
resource ${rsm.getEntityStateName()}_${transition.getTargetStateName()}
	item ${transition.getTargetEntityName()}
#if ($transition.isPseudoState())
	view { GETEntity }
	actions { ${transition.getAction()} }
#if ($transition.hasRelations())
	relations { "${transition.getRelations()}" }
#end
#if ($transition.isBoundToCollection()) 
	path "/${rsm.getCollectionStateName()}()"
#else
	path "/${rsm.getCollectionStateName()}(${rsm.getPathParametersTemplate()})"
#end
#else
	view { GETNavProperty${transition.getTargetStateName()} }
	path "/${rsm.getCollectionStateName()}(${rsm.getPathParametersTemplate()})/{nav${transition.getTargetStateName()}}"
	GET -> ${transition.getTargetResourceStateMachine().getEntityStateName()} id=${transition.getTargetResourceStateMachine().getMappedEntityProperty()}
#end
end
#end
#end
#end